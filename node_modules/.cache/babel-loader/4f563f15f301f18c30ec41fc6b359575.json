{"ast":null,"code":"import { passFilterLogic } from '@mui/x-data-grid/internals';\nexport const TREE_DATA_STRATEGY = 'tree-data';\n/**\n * A node is visible if one of the following criteria is met:\n * - One of its children is passing the filter\n * - It is passing the filter\n */\n\nexport const filterRowTreeFromTreeData = params => {\n  const {\n    rowTree,\n    disableChildrenFiltering,\n    isRowMatchingFilters\n  } = params;\n  const visibleRowsLookup = {};\n  const filteredRowsLookup = {};\n  const filteredDescendantCountLookup = {};\n\n  const filterTreeNode = (node, isParentMatchingFilters, areAncestorsExpanded) => {\n    var _node$children;\n\n    const shouldSkipFilters = disableChildrenFiltering && node.depth > 0;\n    let isMatchingFilters;\n\n    if (shouldSkipFilters) {\n      isMatchingFilters = null;\n    } else if (!isRowMatchingFilters || node.position === 'footer') {\n      isMatchingFilters = true;\n    } else {\n      const {\n        passingFilterItems,\n        passingQuickFilterValues\n      } = isRowMatchingFilters(node.id);\n      isMatchingFilters = passFilterLogic([passingFilterItems], [passingQuickFilterValues], params.filterModel, params.apiRef);\n    }\n\n    let filteredDescendantCount = 0;\n    (_node$children = node.children) == null ? void 0 : _node$children.forEach(childId => {\n      var _isMatchingFilters;\n\n      const childNode = rowTree[childId];\n      const childSubTreeSize = filterTreeNode(childNode, (_isMatchingFilters = isMatchingFilters) != null ? _isMatchingFilters : isParentMatchingFilters, areAncestorsExpanded && !!node.childrenExpanded);\n      filteredDescendantCount += childSubTreeSize;\n    });\n    let shouldPassFilters;\n\n    switch (isMatchingFilters) {\n      case true:\n        {\n          shouldPassFilters = true;\n          break;\n        }\n\n      case false:\n        {\n          shouldPassFilters = filteredDescendantCount > 0;\n          break;\n        }\n\n      default:\n        {\n          shouldPassFilters = isParentMatchingFilters;\n          break;\n        }\n    }\n\n    visibleRowsLookup[node.id] = shouldPassFilters && areAncestorsExpanded;\n    filteredRowsLookup[node.id] = shouldPassFilters;\n\n    if (node.footerId != null) {\n      visibleRowsLookup[node.footerId] = shouldPassFilters && areAncestorsExpanded && !!node.childrenExpanded;\n    }\n\n    if (!shouldPassFilters) {\n      return 0;\n    }\n\n    filteredDescendantCountLookup[node.id] = filteredDescendantCount;\n\n    if (node.position === 'footer') {\n      return filteredDescendantCount;\n    }\n\n    return filteredDescendantCount + 1;\n  };\n\n  const nodes = Object.values(rowTree);\n\n  for (let i = 0; i < nodes.length; i += 1) {\n    const node = nodes[i];\n\n    if (node.depth === 0) {\n      filterTreeNode(node, true, true);\n    }\n  }\n\n  return {\n    visibleRowsLookup,\n    filteredRowsLookup,\n    filteredDescendantCountLookup\n  };\n};","map":{"version":3,"names":["passFilterLogic","TREE_DATA_STRATEGY","filterRowTreeFromTreeData","params","rowTree","disableChildrenFiltering","isRowMatchingFilters","visibleRowsLookup","filteredRowsLookup","filteredDescendantCountLookup","filterTreeNode","node","isParentMatchingFilters","areAncestorsExpanded","_node$children","shouldSkipFilters","depth","isMatchingFilters","position","passingFilterItems","passingQuickFilterValues","id","filterModel","apiRef","filteredDescendantCount","children","forEach","childId","_isMatchingFilters","childNode","childSubTreeSize","childrenExpanded","shouldPassFilters","footerId","nodes","Object","values","i","length"],"sources":["/Users/dewan03/project/project/node_modules/@mui/x-data-grid-pro/hooks/features/treeData/gridTreeDataUtils.js"],"sourcesContent":["import { passFilterLogic } from '@mui/x-data-grid/internals';\nexport const TREE_DATA_STRATEGY = 'tree-data';\n/**\n * A node is visible if one of the following criteria is met:\n * - One of its children is passing the filter\n * - It is passing the filter\n */\n\nexport const filterRowTreeFromTreeData = params => {\n  const {\n    rowTree,\n    disableChildrenFiltering,\n    isRowMatchingFilters\n  } = params;\n  const visibleRowsLookup = {};\n  const filteredRowsLookup = {};\n  const filteredDescendantCountLookup = {};\n\n  const filterTreeNode = (node, isParentMatchingFilters, areAncestorsExpanded) => {\n    var _node$children;\n\n    const shouldSkipFilters = disableChildrenFiltering && node.depth > 0;\n    let isMatchingFilters;\n\n    if (shouldSkipFilters) {\n      isMatchingFilters = null;\n    } else if (!isRowMatchingFilters || node.position === 'footer') {\n      isMatchingFilters = true;\n    } else {\n      const {\n        passingFilterItems,\n        passingQuickFilterValues\n      } = isRowMatchingFilters(node.id);\n      isMatchingFilters = passFilterLogic([passingFilterItems], [passingQuickFilterValues], params.filterModel, params.apiRef);\n    }\n\n    let filteredDescendantCount = 0;\n    (_node$children = node.children) == null ? void 0 : _node$children.forEach(childId => {\n      var _isMatchingFilters;\n\n      const childNode = rowTree[childId];\n      const childSubTreeSize = filterTreeNode(childNode, (_isMatchingFilters = isMatchingFilters) != null ? _isMatchingFilters : isParentMatchingFilters, areAncestorsExpanded && !!node.childrenExpanded);\n      filteredDescendantCount += childSubTreeSize;\n    });\n    let shouldPassFilters;\n\n    switch (isMatchingFilters) {\n      case true:\n        {\n          shouldPassFilters = true;\n          break;\n        }\n\n      case false:\n        {\n          shouldPassFilters = filteredDescendantCount > 0;\n          break;\n        }\n\n      default:\n        {\n          shouldPassFilters = isParentMatchingFilters;\n          break;\n        }\n    }\n\n    visibleRowsLookup[node.id] = shouldPassFilters && areAncestorsExpanded;\n    filteredRowsLookup[node.id] = shouldPassFilters;\n\n    if (node.footerId != null) {\n      visibleRowsLookup[node.footerId] = shouldPassFilters && areAncestorsExpanded && !!node.childrenExpanded;\n    }\n\n    if (!shouldPassFilters) {\n      return 0;\n    }\n\n    filteredDescendantCountLookup[node.id] = filteredDescendantCount;\n\n    if (node.position === 'footer') {\n      return filteredDescendantCount;\n    }\n\n    return filteredDescendantCount + 1;\n  };\n\n  const nodes = Object.values(rowTree);\n\n  for (let i = 0; i < nodes.length; i += 1) {\n    const node = nodes[i];\n\n    if (node.depth === 0) {\n      filterTreeNode(node, true, true);\n    }\n  }\n\n  return {\n    visibleRowsLookup,\n    filteredRowsLookup,\n    filteredDescendantCountLookup\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}